<<<<<<< HEAD
#!/usr/bin/env python3
"""
Test script to verify FloatChat setup
"""
import asyncio
import sys
from pathlib import Path

async def test_imports():
    """Test if all modules can be imported"""
    print("üß™ Testing imports...")
    
    try:
        from config.settings import settings
        print("‚úÖ Config settings imported")
        
        from backend.models import QueryRequest, QueryResponse
        print("‚úÖ Backend models imported")
        
        from backend.database import create_tables, get_db_session
        print("‚úÖ Database modules imported")
        
        from backend.services.llm_service import LLMService
        print("‚úÖ LLM service imported")
        
        from backend.services.data_service import DataService
        print("‚úÖ Data service imported")
        
        from backend.services.visualization_service import VisualizationService
        print("‚úÖ Visualization service imported")
        
        from ai.query_processor import QueryProcessor
        print("‚úÖ Query processor imported")
        
        from data.ingestion.argo_ingester import ArgoIngester
        print("‚úÖ ARGO ingester imported")
        
        return True
        
    except ImportError as e:
        print(f"‚ùå Import error: {e}")
        return False

async def test_services():
    """Test if services can be initialized"""
    print("\nüîß Testing service initialization...")
    
    try:
        # Test LLM service
        from backend.services.llm_service import LLMService
        llm_service = LLMService()
        print("‚úÖ LLM service created")
        
        # Test Data service
        from backend.services.data_service import DataService
        data_service = DataService()
        await data_service.initialize()
        print("‚úÖ Data service initialized")
        
        # Test Visualization service
        from backend.services.visualization_service import VisualizationService
        viz_service = VisualizationService()
        await viz_service.initialize()
        print("‚úÖ Visualization service initialized")
        
        return True
        
    except Exception as e:
        print(f"‚ùå Service initialization error: {e}")
        return False

async def test_api_keys():
    """Test if API keys are configured"""
    print("\nüîë Testing API key configuration...")
    
    try:
        from config.settings import settings
        
        # Check critical API keys
        if settings.GROQ_API_KEY and not settings.GROQ_API_KEY.startswith("your_"):
            print("‚úÖ Groq API key configured")
        else:
            print("‚ö†Ô∏è Groq API key not configured")
        
        if settings.PINECONE_API_KEY and not settings.PINECONE_API_KEY.startswith("your_"):
            print("‚úÖ Pinecone API key configured")
        else:
            print("‚ö†Ô∏è Pinecone API key not configured")
        
        if settings.COHERE_API_KEY and not settings.COHERE_API_KEY.startswith("your_"):
            print("‚úÖ Cohere API key configured")
        else:
            print("‚ö†Ô∏è Cohere API key not configured")
        
        if settings.DATABASE_URL and not settings.DATABASE_URL.startswith("postgresql://postgres:your_password"):
            print("‚úÖ Database URL configured")
        else:
            print("‚ö†Ô∏è Database URL not configured")
        
        # Check data sources
        if settings.ARGO_API_BASE:
            print("‚úÖ ARGO API configured")
        else:
            print("‚ö†Ô∏è ARGO API not configured")
        
        if settings.ERDDAP_BASE:
            print("‚úÖ ERDDAP API configured")
        else:
            print("‚ö†Ô∏è ERDDAP API not configured")
        
        return True
        
    except Exception as e:
        print(f"‚ùå API key check error: {e}")
        return False

async def test_database():
    """Test database connection"""
    print("\nüóÑÔ∏è Testing database connection...")
    
    try:
        from backend.database import engine
        
        # Try to connect
        with engine.connect() as conn:
            result = conn.execute("SELECT 1")
            print("‚úÖ Database connection successful")
            return True
            
    except Exception as e:
        print(f"‚ö†Ô∏è Database connection failed: {e}")
        print("üí° This is expected if you haven't set up your cloud database yet")
        return False

async def main():
    """Run all tests"""
    print("üß™ FloatChat Setup Test")
    print("=" * 30)
    
    # Check if .env exists
    if not Path(".env").exists():
        print("‚ùå .env file not found!")
        print("üìù Please copy .env.example to .env and configure your API keys")
        sys.exit(1)
    
    tests_passed = 0
    total_tests = 4
    
    # Test imports
    if await test_imports():
        tests_passed += 1
    
    # Test services
    if await test_services():
        tests_passed += 1
    
    # Test API keys
    if await test_api_keys():
        tests_passed += 1
    
    # Test database
    if await test_database():
        tests_passed += 1
    
    print(f"\nüìä Test Results: {tests_passed}/{total_tests} tests passed")
    
    if tests_passed == total_tests:
        print("üéâ All tests passed! FloatChat is ready to run.")
        print("üöÄ Run 'python start.py' to start the application")
    elif tests_passed >= 2:
        print("‚ö†Ô∏è Some tests failed, but basic functionality should work")
        print("üìñ Check docs/CLOUD_APIS_SETUP.md for configuration help")
    else:
        print("‚ùå Multiple tests failed. Please check your setup.")
        print("üìñ See docs/CLOUD_APIS_SETUP.md for detailed setup instructions")

if __name__ == "__main__":
=======
#!/usr/bin/env python3
"""
Test script to verify FloatChat setup
"""
import asyncio
import sys
from pathlib import Path

async def test_imports():
    """Test if all modules can be imported"""
    print("üß™ Testing imports...")
    
    try:
        from config.settings import settings
        print("‚úÖ Config settings imported")
        
        from backend.models import QueryRequest, QueryResponse
        print("‚úÖ Backend models imported")
        
        from backend.database import create_tables, get_db_session
        print("‚úÖ Database modules imported")
        
        from backend.services.llm_service import LLMService
        print("‚úÖ LLM service imported")
        
        from backend.services.data_service import DataService
        print("‚úÖ Data service imported")
        
        from backend.services.visualization_service import VisualizationService
        print("‚úÖ Visualization service imported")
        
        from ai.query_processor import QueryProcessor
        print("‚úÖ Query processor imported")
        
        from data.ingestion.argo_ingester import ArgoIngester
        print("‚úÖ ARGO ingester imported")
        
        return True
        
    except ImportError as e:
        print(f"‚ùå Import error: {e}")
        return False

async def test_services():
    """Test if services can be initialized"""
    print("\nüîß Testing service initialization...")
    
    try:
        # Test LLM service
        from backend.services.llm_service import LLMService
        llm_service = LLMService()
        print("‚úÖ LLM service created")
        
        # Test Data service
        from backend.services.data_service import DataService
        data_service = DataService()
        await data_service.initialize()
        print("‚úÖ Data service initialized")
        
        # Test Visualization service
        from backend.services.visualization_service import VisualizationService
        viz_service = VisualizationService()
        await viz_service.initialize()
        print("‚úÖ Visualization service initialized")
        
        return True
        
    except Exception as e:
        print(f"‚ùå Service initialization error: {e}")
        return False

async def test_api_keys():
    """Test if API keys are configured"""
    print("\nüîë Testing API key configuration...")
    
    try:
        from config.settings import settings
        
        # Check critical API keys
        if settings.GROQ_API_KEY and not settings.GROQ_API_KEY.startswith("your_"):
            print("‚úÖ Groq API key configured")
        else:
            print("‚ö†Ô∏è Groq API key not configured")
        
        if settings.PINECONE_API_KEY and not settings.PINECONE_API_KEY.startswith("your_"):
            print("‚úÖ Pinecone API key configured")
        else:
            print("‚ö†Ô∏è Pinecone API key not configured")
        
        if settings.COHERE_API_KEY and not settings.COHERE_API_KEY.startswith("your_"):
            print("‚úÖ Cohere API key configured")
        else:
            print("‚ö†Ô∏è Cohere API key not configured")
        
        if settings.DATABASE_URL and not settings.DATABASE_URL.startswith("postgresql://postgres:your_password"):
            print("‚úÖ Database URL configured")
        else:
            print("‚ö†Ô∏è Database URL not configured")
        
        # Check data sources
        if settings.ARGO_API_BASE:
            print("‚úÖ ARGO API configured")
        else:
            print("‚ö†Ô∏è ARGO API not configured")
        
        if settings.ERDDAP_BASE:
            print("‚úÖ ERDDAP API configured")
        else:
            print("‚ö†Ô∏è ERDDAP API not configured")
        
        return True
        
    except Exception as e:
        print(f"‚ùå API key check error: {e}")
        return False

async def test_database():
    """Test database connection"""
    print("\nüóÑÔ∏è Testing database connection...")
    
    try:
        from backend.database import engine
        
        # Try to connect
        with engine.connect() as conn:
            result = conn.execute("SELECT 1")
            print("‚úÖ Database connection successful")
            return True
            
    except Exception as e:
        print(f"‚ö†Ô∏è Database connection failed: {e}")
        print("üí° This is expected if you haven't set up your cloud database yet")
        return False

async def main():
    """Run all tests"""
    print("üß™ FloatChat Setup Test")
    print("=" * 30)
    
    # Check if .env exists
    if not Path(".env").exists():
        print("‚ùå .env file not found!")
        print("üìù Please copy .env.example to .env and configure your API keys")
        sys.exit(1)
    
    tests_passed = 0
    total_tests = 4
    
    # Test imports
    if await test_imports():
        tests_passed += 1
    
    # Test services
    if await test_services():
        tests_passed += 1
    
    # Test API keys
    if await test_api_keys():
        tests_passed += 1
    
    # Test database
    if await test_database():
        tests_passed += 1
    
    print(f"\nüìä Test Results: {tests_passed}/{total_tests} tests passed")
    
    if tests_passed == total_tests:
        print("üéâ All tests passed! FloatChat is ready to run.")
        print("üöÄ Run 'python start.py' to start the application")
    elif tests_passed >= 2:
        print("‚ö†Ô∏è Some tests failed, but basic functionality should work")
        print("üìñ Check docs/CLOUD_APIS_SETUP.md for configuration help")
    else:
        print("‚ùå Multiple tests failed. Please check your setup.")
        print("üìñ See docs/CLOUD_APIS_SETUP.md for detailed setup instructions")

if __name__ == "__main__":
>>>>>>> 5347d1d (Initial commit: FloatChat AI-Powered ARGO Data System)
    asyncio.run(main())